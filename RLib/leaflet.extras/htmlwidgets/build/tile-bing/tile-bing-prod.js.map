{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/leaflet-plugins/layer/tile/Bing.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","object","property","prototype","hasOwnProperty","p","s","L","BingLayer","TileLayer","extend","options","subdomains","type","attribution","culture","initialize","key","Util","setOptions","this","_key","_url","_providers","metaRequested","tile2quad","x","y","z","quad","digit","mask","getTileUrl","tilePoint","zoom","_getZoomForUrl","Math","abs","length","replace","loadMetadata","_this","cbid","stamp","window","meta","undefined","e","document","getElementById","parentNode","removeChild","errorDetails","Error","initMetadata","urlScheme","location","protocol","slice","url","script","createElement","src","id","getElementsByTagName","appendChild","resourceSets","resources","imageUrlSubdomains","imageUrl","imageryProviders","j","coverageAreas","coverage","zoomMin","zoomMax","active","bounds","LatLngBounds","LatLng","bbox","attrib","push","_update","_map","_update_attribution","apply","latLngBounds","getBounds","getSouthWest","wrap","getNorthEast","getZoom","intersects","attributionControl","addAttribution","removeAttribution","onAdd","map","onRemove","bingLayer"],"mappings":"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","file":"tile-bing-prod.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","L.BingLayer = L.TileLayer.extend({\n\toptions: {\n\t\tsubdomains: [0, 1, 2, 3],\n\t\ttype: 'Aerial',\n\t\tattribution: 'Bing',\n\t\tculture: ''\n\t},\n\n\tinitialize: function (key, options) {\n\t\tL.Util.setOptions(this, options);\n\n\t\tthis._key = key;\n\t\tthis._url = null;\n\t\tthis._providers = [];\n\t\tthis.metaRequested = false;\n\t},\n\n\ttile2quad: function (x, y, z) {\n\t\tvar quad = '';\n\t\tfor (var i = z; i > 0; i--) {\n\t\t\tvar digit = 0;\n\t\t\tvar mask = 1 << (i - 1);\n\t\t\tif ((x & mask) !== 0) digit += 1;\n\t\t\tif ((y & mask) !== 0) digit += 2;\n\t\t\tquad = quad + digit;\n\t\t}\n\t\treturn quad;\n\t},\n\n\tgetTileUrl: function (tilePoint) {\n\t\tvar zoom = this._getZoomForUrl();\n\t\tvar subdomains = this.options.subdomains,\n\t\t\ts = this.options.subdomains[Math.abs((tilePoint.x + tilePoint.y) % subdomains.length)];\n\t\treturn this._url.replace('{subdomain}', s)\n\t\t\t\t.replace('{quadkey}', this.tile2quad(tilePoint.x, tilePoint.y, zoom))\n\t\t\t\t.replace('{culture}', this.options.culture);\n\t},\n\n\tloadMetadata: function () {\n\t\tif (this.metaRequested) return;\n\t\tthis.metaRequested = true;\n\t\tvar _this = this;\n\t\tvar cbid = '_bing_metadata_' + L.Util.stamp(this);\n\t\twindow[cbid] = function (meta) {\n\t\t\twindow[cbid] = undefined;\n\t\t\tvar e = document.getElementById(cbid);\n\t\t\te.parentNode.removeChild(e);\n\t\t\tif (meta.errorDetails) {\n\t\t\t\tthrow new Error(meta.errorDetails);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t_this.initMetadata(meta);\n\t\t};\n\t\tvar urlScheme = (document.location.protocol === 'file:') ? 'http' : document.location.protocol.slice(0, -1);\n\t\tvar url = urlScheme + '://dev.virtualearth.net/REST/v1/Imagery/Metadata/'\n\t\t\t\t\t+ this.options.type + '?include=ImageryProviders&jsonp=' + cbid +\n\t\t\t\t\t'&key=' + this._key + '&UriScheme=' + urlScheme;\n\t\tvar script = document.createElement('script');\n\t\tscript.type = 'text/javascript';\n\t\tscript.src = url;\n\t\tscript.id = cbid;\n\t\tdocument.getElementsByTagName('head')[0].appendChild(script);\n\t},\n\n\tinitMetadata: function (meta) {\n\t\tvar r = meta.resourceSets[0].resources[0];\n\t\tthis.options.subdomains = r.imageUrlSubdomains;\n\t\tthis._url = r.imageUrl;\n\t\tif (r.imageryProviders) {\n\t\t\tfor (var i = 0; i < r.imageryProviders.length; i++) {\n\t\t\t\tvar p = r.imageryProviders[i];\n\t\t\t\tfor (var j = 0; j < p.coverageAreas.length; j++) {\n\t\t\t\t\tvar c = p.coverageAreas[j];\n\t\t\t\t\tvar coverage = {zoomMin: c.zoomMin, zoomMax: c.zoomMax, active: false};\n\t\t\t\t\tvar bounds = new L.LatLngBounds(\n\t\t\t\t\t\t\tnew L.LatLng(c.bbox[0]+0.01, c.bbox[1]+0.01),\n\t\t\t\t\t\t\tnew L.LatLng(c.bbox[2]-0.01, c.bbox[3]-0.01)\n\t\t\t\t\t);\n\t\t\t\t\tcoverage.bounds = bounds;\n\t\t\t\t\tcoverage.attrib = p.attribution;\n\t\t\t\t\tthis._providers.push(coverage);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tthis._update();\n\t},\n\n\t_update: function () {\n\t\tif (this._url === null || !this._map) return;\n\t\tthis._update_attribution();\n\t\tL.TileLayer.prototype._update.apply(this, []);\n\t},\n\n\t_update_attribution: function () {\n\t\tvar bounds = L.latLngBounds(this._map.getBounds().getSouthWest().wrap(),this._map.getBounds().getNorthEast().wrap());\n\t\tvar zoom = this._map.getZoom();\n\t\tfor (var i = 0; i < this._providers.length; i++) {\n\t\t\tvar p = this._providers[i];\n\t\t\tif ((zoom <= p.zoomMax && zoom >= p.zoomMin) &&\n\t\t\t\t\tbounds.intersects(p.bounds)) {\n\t\t\t\tif (!p.active && this._map.attributionControl)\n\t\t\t\t\tthis._map.attributionControl.addAttribution(p.attrib);\n\t\t\t\tp.active = true;\n\t\t\t} else {\n\t\t\t\tif (p.active && this._map.attributionControl)\n\t\t\t\t\tthis._map.attributionControl.removeAttribution(p.attrib);\n\t\t\t\tp.active = false;\n\t\t\t}\n\t\t}\n\t},\n\n\tonAdd: function (map) {\n\t\tthis.loadMetadata();\n\t\tL.TileLayer.prototype.onAdd.apply(this, [map]);\n\t},\n\n\tonRemove: function (map) {\n\t\tfor (var i = 0; i < this._providers.length; i++) {\n\t\t\tvar p = this._providers[i];\n\t\t\tif (p.active && this._map.attributionControl) {\n\t\t\t\tthis._map.attributionControl.removeAttribution(p.attrib);\n\t\t\t\tp.active = false;\n\t\t\t}\n\t\t}\n\t\tL.TileLayer.prototype.onRemove.apply(this, [map]);\n\t}\n});\n\nL.bingLayer = function (key, options) {\n    return new L.BingLayer(key, options);\n};\n"],"sourceRoot":""}